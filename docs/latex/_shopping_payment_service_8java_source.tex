\doxysection{Shopping\+Payment\+Service.\+java}
\hypertarget{_shopping_payment_service_8java_source}{}\label{_shopping_payment_service_8java_source}\mbox{\hyperlink{_shopping_payment_service_8java}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00001}00001\ \textcolor{keyword}{import}\ \mbox{\hyperlink{class_i_factory}{java}}.util.List;}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00003}\mbox{\hyperlink{class_shopping_payment_service}{00003}}\ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_shopping_payment_service}{ShoppingPaymentService}}\ \{}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00004}00004\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00005}00005\ \textcolor{comment}{\ \ \ \ /**}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00006}00006\ \textcolor{comment}{\ \ \ \ \ *\ The\ logging\ agent\ used\ for\ logging\ in\ the\ shopping\ payment\ service.}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00007}00007\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00008}\mbox{\hyperlink{class_shopping_payment_service_a18e910fe81b39a08bc3d3174aca902cf}{00008}}\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{class_app_logging_agent}{AppLoggingAgent}}\ \mbox{\hyperlink{class_shopping_payment_service_a18e910fe81b39a08bc3d3174aca902cf}{logging}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_app_logging_agent}{AppLoggingAgent}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_app_logging_stream}{AppLoggingStream}}());\textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00009}00009\ \textcolor{comment}{\ \ \ \ /**}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00010}00010\ \textcolor{comment}{\ \ \ \ \ *\ Represents\ an\ interface\ for\ accessing\ the\ environment\ settings.}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00011}00011\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00012}\mbox{\hyperlink{class_shopping_payment_service_a8248724e7224b39024328fef10135672}{00012}}\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{interface_i_environment}{IEnvironment}}\ \mbox{\hyperlink{class_shopping_payment_service_a8248724e7224b39024328fef10135672}{environment}};\textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00013}00013\ \textcolor{comment}{\ \ \ \ /**}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00014}00014\ \textcolor{comment}{\ \ \ \ \ *\ The\ ShoppingBusinessLayerService\ is\ responsible\ for\ handling\ the\ business}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00015}00015\ \textcolor{comment}{\ \ \ \ \ *\ logic\ related\ to\ shopping.}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00016}00016\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00017}\mbox{\hyperlink{class_shopping_payment_service_a72a8c995155e29b9ff28f2a48a40b9a7}{00017}}\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{class_shopping_business_layer_service}{ShoppingBusinessLayerService}}\ \mbox{\hyperlink{class_shopping_payment_service_a72a8c995155e29b9ff28f2a48a40b9a7}{shoppingBusinessService}};}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00019}\mbox{\hyperlink{class_shopping_payment_service_aad11d53224494e85d1fc79e03598f368}{00019}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_shopping_payment_service_aad11d53224494e85d1fc79e03598f368}{ShoppingPaymentService}}(\mbox{\hyperlink{interface_i_environment}{IEnvironment}}\ \mbox{\hyperlink{class_shopping_payment_service_a8248724e7224b39024328fef10135672}{environment}},\ \mbox{\hyperlink{class_shopping_business_layer_service}{ShoppingBusinessLayerService}}\ \mbox{\hyperlink{class_shopping_payment_service_a72a8c995155e29b9ff28f2a48a40b9a7}{shoppingBusinessService}})\ \{}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00020}00020\ \ \ \ \ \ \ \ \ this.environment\ =\ \mbox{\hyperlink{class_shopping_payment_service_a8248724e7224b39024328fef10135672}{environment}};}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00021}00021\ \ \ \ \ \ \ \ \ this.shoppingBusinessService\ =\ \mbox{\hyperlink{class_shopping_payment_service_a72a8c995155e29b9ff28f2a48a40b9a7}{shoppingBusinessService}};}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00022}00022\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00023}00023\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00024}00024\ \textcolor{comment}{\ \ \ \ /**}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00025}00025\ \textcolor{comment}{\ \ \ \ \ *\ Configures\ the\ shopping\ payment\ service}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00026}00026\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00027}\mbox{\hyperlink{class_shopping_payment_service_ab9a38a5313ee77cb4c89c3e3146f2a69}{00027}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_shopping_payment_service_ab9a38a5313ee77cb4c89c3e3146f2a69}{configure}}()\ \{}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00028}00028\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ Implement\ configuration\ logic}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00029}00029\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00030}00030\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00031}00031\ \textcolor{comment}{\ \ \ \ /**}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00032}00032\ \textcolor{comment}{\ \ \ \ \ *\ Processes\ the\ payment\ for\ a\ given\ cart\ and\ payment\ profile.}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00033}00033\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00034}00034\ \textcolor{comment}{\ \ \ \ \ *\ @param\ cartId\ \ \ \ \ \ \ \ \ \ \ The\ ID\ of\ the\ cart.}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00035}00035\ \textcolor{comment}{\ \ \ \ \ *\ @param\ paymentProfileId\ The\ ID\ of\ the\ payment\ profile.}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00036}00036\ \textcolor{comment}{\ \ \ \ \ *\ @return\ \{@code\ true\}\ if\ the\ payment\ is\ processed\ successfully,\ \{@code\ false\}}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00037}00037\ \textcolor{comment}{\ \ \ \ \ *\ \ \ \ \ \ \ \ \ otherwise.}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00038}00038\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00039}\mbox{\hyperlink{class_shopping_payment_service_a68e75d806a34488d24b19fe3c56c020f}{00039}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_i_factory}{Boolean}}\ \mbox{\hyperlink{class_shopping_payment_service_a68e75d806a34488d24b19fe3c56c020f}{processPayment}}(Integer\ \mbox{\hyperlink{class_i_factory}{cartId}},\ Integer\ \mbox{\hyperlink{class_i_factory}{paymentProfileId}})\ \{}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00040}00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{interface_i_d_t_o}{IDTO}}\ \mbox{\hyperlink{class_i_factory}{cart}}\ =\ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_a2cd8b3c82a3fa32bb8d4ed6bc1c7bbea}{getCart}}(\mbox{\hyperlink{class_i_factory}{cartId}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00041}00041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_i_factory}{cart}}\ ==\ \textcolor{keyword}{null})\ \{}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \ \ \ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_a371a77c8a18227ab2d89cca6c05b0bea}{addAuditTrail}}(\textcolor{stringliteral}{"{}cartId:\ "{}}\ +\ \mbox{\hyperlink{class_i_factory}{cartId}}\ +\ \textcolor{stringliteral}{"{}\ INVALID\ cartId"{}},}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{class_user_d_t_o}{UserDTO}})\ \mbox{\hyperlink{class_user_d_t_o_home}{UserDTOHome}}.\mbox{\hyperlink{class_user_d_t_o_home_a27fd9be7fdf49c5bce57889a40f3bdeb}{Instance}}().newDTOInstance());}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00044}00044\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_shopping_payment_service_a18e910fe81b39a08bc3d3174aca902cf}{logging}}.\mbox{\hyperlink{class_app_logging_agent_afc74c9adb1329480c9906d620eecc2d2}{log}}(\textcolor{stringliteral}{"{}Order\ not\ found"{}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00046}00046\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00047}00047\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_user_d_t_o}{UserDTO}}\ \mbox{\hyperlink{class_i_factory}{user}}\ =\ (\mbox{\hyperlink{class_user_d_t_o}{UserDTO}})\ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_a3a48d2c04546905127e6c3531f50f050}{getUser}}((Integer)\ \mbox{\hyperlink{class_i_factory}{cart}}.getValue(\textcolor{stringliteral}{"{}user\_id"{}}));}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00048}00048\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_i_factory}{user}}\ ==\ \textcolor{keyword}{null})\ \{}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_a371a77c8a18227ab2d89cca6c05b0bea}{addAuditTrail}}(\textcolor{stringliteral}{"{}cartId:\ "{}}\ +\ \mbox{\hyperlink{class_i_factory}{cartId}}\ +\ \textcolor{stringliteral}{"{}\ INVALID\ USERID"{}},}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00050}00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{class_user_d_t_o}{UserDTO}})\ \mbox{\hyperlink{class_user_d_t_o_home}{UserDTOHome}}.\mbox{\hyperlink{class_user_d_t_o_home_a27fd9be7fdf49c5bce57889a40f3bdeb}{Instance}}().newDTOInstance());}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_shopping_payment_service_a18e910fe81b39a08bc3d3174aca902cf}{logging}}.\mbox{\hyperlink{class_app_logging_agent_afc74c9adb1329480c9906d620eecc2d2}{log}}(\textcolor{stringliteral}{"{}User\ not\ found"{}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00053}00053\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ user\ payment\ method}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00055}00055\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{interface_i_d_t_o}{IDTO}}\ \mbox{\hyperlink{class_i_factory}{userPayment}}\ =\ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_ab8b7692649c6c5a2c04ca1878d8be391}{getPaymentProfile}}(\mbox{\hyperlink{class_i_factory}{paymentProfileId}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00056}00056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_i_factory}{userPayment}}\ ==\ \textcolor{keyword}{null})\ \{}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_a371a77c8a18227ab2d89cca6c05b0bea}{addAuditTrail}}(\textcolor{stringliteral}{"{}cartId:\ "{}}\ +\ \mbox{\hyperlink{class_i_factory}{cartId}}\ +\ \textcolor{stringliteral}{"{}\ INVALID\ PAYMENT\ PROFILE"{}},}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00058}00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{user}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_shopping_payment_service_a18e910fe81b39a08bc3d3174aca902cf}{logging}}.\mbox{\hyperlink{class_app_logging_agent_afc74c9adb1329480c9906d620eecc2d2}{log}}(\textcolor{stringliteral}{"{}User\ payment\ method\ not\ found"{}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00060}00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00061}00061\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00063}00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_purchase_d_t_o}{PurchaseDTO}}\ \mbox{\hyperlink{class_i_factory}{pudto}}\ =\ (\mbox{\hyperlink{class_purchase_d_t_o}{PurchaseDTO}})\ \mbox{\hyperlink{class_purchase_d_t_o_home}{PurchaseDTOHome}}.\mbox{\hyperlink{class_purchase_d_t_o_home_a128908f1c26ee85537858ce6b99a7ad6}{Instance}}().newDTOInstance();}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00064}00064\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{pudto}}.setValue(\textcolor{stringliteral}{"{}user\_id"{}},\ \mbox{\hyperlink{class_i_factory}{user}}.getValue(\textcolor{stringliteral}{"{}id"{}}));}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00065}00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{pudto}}.setValue(\textcolor{stringliteral}{"{}paymentprofile\_id"{}},\ \mbox{\hyperlink{class_i_factory}{userPayment}}.getValue(\textcolor{stringliteral}{"{}id"{}}));}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00066}00066\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{List<IDTO>}}\ \mbox{\hyperlink{class_i_factory}{purchases}}\ =\ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_ab23c8839a99e042615cb7f30389eb066}{saveDTO}}(\mbox{\hyperlink{class_i_factory}{pudto}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00067}00067\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{pudto}}\ =\ (\mbox{\hyperlink{class_purchase_d_t_o}{PurchaseDTO}})\ \mbox{\hyperlink{class_i_factory}{purchases}}.getFirst();}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00069}00069\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_order_d_t_o}{OrderDTO}}\ \mbox{\hyperlink{class_i_factory}{order}}\ =\ (\mbox{\hyperlink{class_order_d_t_o}{OrderDTO}})\ \mbox{\hyperlink{class_order_d_t_o_home}{OrderDTOHome}}.\mbox{\hyperlink{class_order_d_t_o_home_a8e2aaf2f1e1bc646152d072551c1879c}{Instance}}().newDTOInstance();}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00070}00070\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{order}}.setValue(\textcolor{stringliteral}{"{}user\_id"{}},\ \mbox{\hyperlink{class_i_factory}{user}}.getValue(\textcolor{stringliteral}{"{}id"{}}));}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00071}00071\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{order}}.setValue(\textcolor{stringliteral}{"{}cart\_id"{}},\ \mbox{\hyperlink{class_i_factory}{cart}}.getValue(\textcolor{stringliteral}{"{}id"{}}));}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00072}00072\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{order}}.setValue(\textcolor{stringliteral}{"{}purchase\_id"{}},\ \mbox{\hyperlink{class_i_factory}{pudto}}.getValue(\textcolor{stringliteral}{"{}id"{}}));}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00073}00073\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{order}}.setValue(\textcolor{stringliteral}{"{}status"{}},\ \textcolor{stringliteral}{"{}pending"{}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00074}00074\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{List<IDTO>}}\ \mbox{\hyperlink{class_i_factory}{orders}}\ =\ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_ab23c8839a99e042615cb7f30389eb066}{saveDTO}}(\mbox{\hyperlink{class_i_factory}{order}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00075}00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{order}}\ =\ (\mbox{\hyperlink{class_order_d_t_o}{OrderDTO}})\ \mbox{\hyperlink{class_i_factory}{orders}}.getFirst();}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00077}00077\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{List<IDTO>}}\ \mbox{\hyperlink{class_i_factory}{cartItems}}\ =\ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_a5a77d07aa069217c76308a2fd517376e}{getCartItems}}(\mbox{\hyperlink{class_i_factory}{cartId}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{interface_i_d_t_o}{IDTO}}\ \mbox{\hyperlink{class_i_factory}{item}}\ :\ \mbox{\hyperlink{class_i_factory}{cartItems}})\ \{}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ Integer\ \mbox{\hyperlink{class_i_factory}{product\_id}}\ =\ (Integer)\ \mbox{\hyperlink{class_i_factory}{item}}.getValue(\textcolor{stringliteral}{"{}product\_id"{}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00080}00080\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{interface_i_d_t_o}{IDTO}}\ \mbox{\hyperlink{class_i_factory}{product}}\ =\ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_acc5e7e0a973a48d00187364c8c66830f}{getProductById}}(\mbox{\hyperlink{class_i_factory}{product\_id}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_order_item_d_t_o}{OrderItemDTO}}\ \mbox{\hyperlink{class_i_factory}{oidto}}\ =\ (\mbox{\hyperlink{class_order_item_d_t_o}{OrderItemDTO}})\ \mbox{\hyperlink{class_order_item_d_t_o_home}{OrderItemDTOHome}}.\mbox{\hyperlink{class_order_item_d_t_o_home_a0639b402c911edfc1626baa82eaae8c2}{Instance}}().newDTOInstance();}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00083}00083\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{oidto}}.setValue(\textcolor{stringliteral}{"{}cartitem\_id"{}},\ \mbox{\hyperlink{class_i_factory}{item}}.getValue(\textcolor{stringliteral}{"{}id"{}}));}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{oidto}}.setValue(\textcolor{stringliteral}{"{}order\_id"{}},\ \mbox{\hyperlink{class_i_factory}{order}}.getValue(\textcolor{stringliteral}{"{}id"{}}));}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{oidto}}.setValue(\textcolor{stringliteral}{"{}price"{}},\ \mbox{\hyperlink{class_i_factory}{product}}.getValue(\textcolor{stringliteral}{"{}price"{}}));}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{List<IDTO>}}\ result\ =\ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_ab23c8839a99e042615cb7f30389eb066}{saveDTO}}(\mbox{\hyperlink{class_i_factory}{oidto}});}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_i_factory}{oidto}}\ =\ (\mbox{\hyperlink{class_order_item_d_t_o}{OrderItemDTO}})\ result.getFirst();}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00088}00088\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00089}00089\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Add\ an\ audit\ trail\ entry}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00090}00090\ \ \ \ \ \ \ \ \ this.shoppingBusinessService.\mbox{\hyperlink{class_shopping_business_layer_service_a371a77c8a18227ab2d89cca6c05b0bea}{addAuditTrail}}(\textcolor{stringliteral}{"{}cartId:\ "{}}\ +\ \mbox{\hyperlink{class_i_factory}{cartId}}\ +\ \textcolor{stringliteral}{"{}\ PAYMENT\ PROCESSED"{}},}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{class_user_d_t_o}{UserDTO}})\ \mbox{\hyperlink{class_user_d_t_o_home}{UserDTOHome}}.\mbox{\hyperlink{class_user_d_t_o_home_a27fd9be7fdf49c5bce57889a40f3bdeb}{Instance}}().newDTOInstance());}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00092}00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00093}00093\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shopping_payment_service_8java_source_l00094}00094\ \}}

\end{DoxyCode}
